(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-goods_search-goods_search"],{"11a6":function(t,e,i){"use strict";i.r(e);var o=i("8e2e"),n=i("f13f");for(var s in n)"default"!==s&&function(t){i.d(e,t,(function(){return n[t]}))}(s);i("c917");var r,a=i("f0c5"),c=Object(a["a"])(n["default"],o["b"],o["c"],!1,null,"0cf16de3",null,!1,o["a"],r);e["default"]=c.exports},1749:function(t,e,i){"use strict";var o=i("b678"),n=i.n(o);n.a},"1ca5":function(t,e,i){"use strict";i.r(e);var o=i("3872"),n=i.n(o);for(var s in o)"default"!==s&&function(t){i.d(e,t,(function(){return o[t]}))}(s);e["default"]=n.a},"2bac":function(t,e,i){var o=i("24fb");e=o(!1),e.push([t.i,'@charset "UTF-8";\n/**\n * 这里是uni-app内置的常用样式变量\n *\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\n *\n */\n/**\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\n *\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\n */\n/* 颜色变量 */\n/* 行为相关颜色 */.custom-image[data-v-0cf16de3]{position:relative;display:block;width:100%;height:100%}.custom-image.image-round[data-v-0cf16de3]{overflow:hidden;border-radius:50%}.custom-image .image[data-v-0cf16de3]{display:block;width:100%;height:100%}.custom-image .loading-wrap[data-v-0cf16de3],\n.custom-image .error-wrap[data-v-0cf16de3]{position:absolute;top:0;left:0;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;color:#969799;font-size:%?28?%;background-color:#f7f8fa}',""]),t.exports=e},"2e19":function(t,e,i){var o=i("a7e3");"string"===typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);var n=i("4f06").default;n("0ef8e2d4",o,!0,{sourceMap:!1,shadowMode:!1})},3872:function(t,e,i){"use strict";var o=i("4ea4");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,i("96cf");var n=o(i("1da1")),s=i("758f"),r=i("f9b6"),a=i("809b"),c=(getApp(),{data:function(){return{headerH:0,keyword:"",status:a.loadingType.LOADING,page:1,goodsType:"double",goodsList:[],priceSort:"",saleSort:"",showHistory:!1,hotList:[],historyList:[]}},components:{},props:{},watch:{keyword:function(t,e){t||this.id||(this.showHistory=!0)},showHistory:function(t){t&&this.getSearchpageFun()}},computed:{comprehensive:function(){var t=this.priceSort,e=this.saleSort;return""==t&&""==e}},onLoad:function(t){this.onNormal=(0,r.trottle)(this.onNormal,500,this),this.onPriceSort=(0,r.trottle)(this.onPriceSort,500,this),this.onSaleSort=(0,r.trottle)(this.onSaleSort,500,this),this.onSearch=(0,r.trottle)(this.onSearch,500,this),this.init(t)},onReachBottom:function(){this.getGoodsSearchFun()},methods:{onChange:function(t){this.keyword=t.value},changeType:function(){this.goodsType="one"===this.goodsType?"double":"one"},clearSearchFun:function(){var t=this;(0,s.clearSearch)().then((function(e){1==e.code&&t.getSearchpageFun()}))},onNormal:function(){this.priceSort="",this.saleSort="",this.onRefresh()},onPriceSort:function(){var t=this.priceSort;this.saleSort="",this.priceSort="asc"==t?"desc":"asc",this.onRefresh()},onSaleSort:function(){var t=this.saleSort;this.priceSort="",this.saleSort="desc"==t?"asc":"desc",this.onSearch()},init:function(t){var e=this,i=t.id,o=t.name,n=t.type;this.type=n,(0,r.getRect)(".header-wrap").then((function(t){e.headerH=t.height})),i?(uni.setNavigationBarTitle({title:o}),this.id=i,this.getGoodsSearchFun()):(uni.setNavigationBarTitle({title:"搜索"}),this.showHistory=!0)},getSearchpageFun:function(){var t=this;(0,s.getSearchpage)().then((function(e){if(1==e.code){var i=e.data,o=i.history_lists,n=i.hot_lists;t.hotList=n,t.historyList=o}}))},onClear:function(){this.id&&this.onSearch()},onSearch:function(){this.onRefresh()},onRefresh:function(){var t=this;this.showHistory=!1,this.page=1,this.goodsList=[],this.status=a.loadingType.LOADING,this.$nextTick((function(){t.getGoodsSearchFun()}))},onChangeKeyword:function(t){this.keyword=t,this.showHistory=!1,this.onRefresh()},getGoodsSearchFun:function(){var t=this;return(0,n.default)(regeneratorRuntime.mark((function e(){var i,o,n,c,l,u,d,h;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(i=t.page,o=t.goodsList,n=t.keyword,c=t.priceSort,l=t.saleSort,u=t.status,u!=a.loadingType.FINISHED){e.next=3;break}return e.abrupt("return");case 3:return d={category_id:1==t.type?t.id:"",brand_id:0==t.type?t.id:"",page_no:i,keyword:n,price:c,sales_sum:l},e.next=6,(0,r.loadingFun)(s.getGoodsSearch,i,o,u,d);case 6:if(h=e.sent,h){e.next=9;break}return e.abrupt("return");case 9:console.log(h),t.page=h.page,t.goodsList=h.dataList,t.status=h.status,console.log(t);case 14:case"end":return e.stop()}}),e)})))()}}});e.default=c},5169:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o={props:{src:{type:String},round:Boolean,width:{type:null},height:{type:null},radius:null,lazyLoad:Boolean,useErrorSlot:Boolean,useLoadingSlot:Boolean,showMenuByLongpress:Boolean,mode:{type:String,default:"scaleToFill"},showError:{type:Boolean,default:!0},showLoading:{type:Boolean,default:!0}},data:function(){return{error:!1,loading:!0,viewStyle:{}}},created:function(){this.setStyle()},methods:{setStyle:function(){var t=this.width,e=this.height,i=this.radius,o={};t&&(o.width=t),e&&(o.height=e),i&&(o["overflow"]="hidden",o["border-radius"]=i),this.viewStyle=o},onLoaded:function(t){this.loading=!1,this.$emit("load",t.detail)},onErrored:function(t){this.error=!1,this.loading=!0,this.$emit("error",t.detail)},onClick:function(t){this.$emit("click",t.detail)}},watch:{src:function(){this.error=!1,this.loading=!0},width:function(){this.setStyle()},height:function(){this.setStyle()}}};e.default=o},"5d08":function(t,e,i){"use strict";i.r(e);var o=i("f10f"),n=i("d1e2");for(var s in n)"default"!==s&&function(t){i.d(e,t,(function(){return n[t]}))}(s);i("f195");var r,a=i("f0c5"),c=Object(a["a"])(n["default"],o["b"],o["c"],!1,null,"a4a53404",null,!1,o["a"],r);e["default"]=c.exports},"865a":function(t,e,i){"use strict";i.r(e);var o=i("8b1b"),n=i("1ca5");for(var s in n)"default"!==s&&function(t){i.d(e,t,(function(){return n[t]}))}(s);i("1749");var r,a=i("f0c5"),c=Object(a["a"])(n["default"],o["b"],o["c"],!1,null,"1e9ec600",null,!1,o["a"],r);e["default"]=c.exports},"873e":function(t,e,i){var o=i("2bac");"string"===typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);var n=i("4f06").default;n("d3f9c894",o,!0,{sourceMap:!1,shadowMode:!1})},"8b1b":function(t,e,i){"use strict";i.d(e,"b",(function(){return n})),i.d(e,"c",(function(){return s})),i.d(e,"a",(function(){return o}));var o={uSticky:i("2841").default,uSearch:i("6775").default,trigonometry:i("9b78").default,goodsList:i("e422").default,loadingFooter:i("0358").default},n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{staticClass:"goods-search"},[i("v-uni-view",{staticClass:"header-wrap"},[i("u-sticky",{attrs:{"offset-top":"0","h5-nav-height":"0"}},[i("v-uni-view",{staticClass:"search"},[i("u-search",{attrs:{"bg-color":"#F4F4F4"},on:{focus:function(e){arguments[0]=e=t.$handleEvent(e),t.showHistory=!0},search:function(e){arguments[0]=e=t.$handleEvent(e),t.onSearch.apply(void 0,arguments)}},model:{value:t.keyword,callback:function(e){t.keyword=e},expression:"keyword"}})],1),i("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:!t.showHistory,expression:"!showHistory"}],staticClass:"header row bg-white"},[i("v-uni-view",{class:"tag row-center "+(t.comprehensive?"primary":""),on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.onNormal.apply(void 0,arguments)}}},[t._v("综合")]),i("v-uni-view",{staticClass:"tag row-center",attrs:{"data-type":"priceSort"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.onPriceSort.apply(void 0,arguments)}}},[i("v-uni-text",{class:t.priceSort?"primary":""},[t._v("价格")]),i("v-uni-view",[i("trigonometry",{attrs:{direction:"up",size:"small",color:"desc"==t.priceSort?"#FF5058":"#333"}}),i("trigonometry",{attrs:{size:"small",color:"asc"==t.priceSort?"#FF5058":"#333"}})],1)],1),i("v-uni-view",{staticClass:"tag row-center",attrs:{"data-type":"saleSort"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.onSaleSort.apply(void 0,arguments)}}},[i("v-uni-text",{class:t.saleSort?"primary":""},[t._v("销量")]),i("v-uni-view",[i("trigonometry",{attrs:{direction:"up",size:"small",color:"desc"==t.saleSort?"#FF5058":"#333"}}),i("trigonometry",{attrs:{size:"small",color:"asc"==t.saleSort?"#FF5058":"#333"}})],1)],1),i("v-uni-view",{staticClass:"tag row-center",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.changeType.apply(void 0,arguments)}}},[i("v-uni-image",{staticClass:"icon-sm",attrs:{src:"one"===t.goodsType?"/static/images/icon_double.png":"/static/images/icon_one.png"}})],1)],1)],1)],1),i("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:t.showHistory,expression:"showHistory"}],staticClass:"content bg-white"},[t.hotList.length?i("v-uni-view",{staticClass:"search-words"},[i("v-uni-view",{staticClass:"title"},[t._v("热门搜索")]),i("v-uni-view",{staticClass:"words row wrap"},t._l(t.hotList,(function(e,o){return i("v-uni-view",{key:o,staticClass:"item br60 bg-gray mr20 mb20 lighter sm line1",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.onChangeKeyword(e)}}},[t._v(t._s(e))])})),1)],1):t._e(),t.historyList.length?i("v-uni-view",{staticClass:"search-words"},[i("v-uni-view",{staticClass:"title row-between"},[i("v-uni-view",[t._v("历史搜索")]),i("v-uni-view",{staticClass:"xs muted mr20",staticStyle:{padding:"10rpx 20rpx"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.clearSearchFun.apply(void 0,arguments)}}},[t._v("清空")])],1),i("v-uni-view",{staticClass:"words row wrap"},t._l(t.historyList,(function(e,o){return i("v-uni-view",{key:o,staticClass:"item br60 bg-gray mr20 mb20 lighter sm line1",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.onChangeKeyword(e)}}},[t._v(t._s(e))])})),1)],1):t._e()],1),i("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:!t.showHistory,expression:"!showHistory"}],staticClass:"content"},[i("v-uni-view",{staticClass:"goods-list"},[i("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:"double"==t.goodsType,expression:"goodsType == 'double'"}],staticClass:"double"},[i("goods-list",{attrs:{type:"double",list:t.goodsList}})],1),i("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:"one"==t.goodsType,expression:"goodsType == 'one'"}],staticClass:"one"},[i("goods-list",{attrs:{list:t.goodsList,type:"one"}})],1)],1),i("loading-footer",{attrs:{status:t.status,"slot-empty":!0},on:{refresh:function(e){arguments[0]=e=t.$handleEvent(e),t.reload.apply(void 0,arguments)}}},[i("v-uni-view",{staticClass:"column-center",staticStyle:{"padding-top":"200rpx"},attrs:{slot:"empty"},slot:"empty"},[i("v-uni-image",{staticClass:"img-null",attrs:{src:"/static/images/goods_null.png"}}),i("v-uni-text",{staticClass:"lighter"},[t._v("暂无商品")])],1)],1)],1)],1)},s=[]},"8e2e":function(t,e,i){"use strict";i.d(e,"b",(function(){return n})),i.d(e,"c",(function(){return s})),i.d(e,"a",(function(){return o}));var o={uIcon:i("4023").default},n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{class:{"custom-image":!0,"image-round":t.round},style:[t.viewStyle],on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.onClick.apply(void 0,arguments)}}},[t.error?t._e():i("v-uni-image",{staticClass:"image",attrs:{src:t.src,mode:t.mode,"lazy-load":t.lazyLoad,"show-menu-by-longpress":t.showMenuByLongpress},on:{load:function(e){arguments[0]=e=t.$handleEvent(e),t.onLoaded.apply(void 0,arguments)},error:function(e){arguments[0]=e=t.$handleEvent(e),t.onErrored.apply(void 0,arguments)}}}),t.loading&&t.showLoading?i("v-uni-view",{staticClass:"loading-wrap image"},[t.useLoadingSlot?t._t("loading"):i("u-icon",{attrs:{color:"#aaa",name:"photo-fill",size:"45"}})],2):t._e(),t.error&&t.showError?i("v-uni-view",{staticClass:"error-wrap image"},[t.useErrorSlot?t._t("error"):i("u-icon",{attrs:{color:"#aaa",name:"error-circle-fill",size:"45"}}),i("v-uni-text",{staticClass:"sm"},[t._v("加载失败")])],2):t._e()],1)},s=[]},9171:function(t,e,i){var o=i("24fb");e=o(!1),e.push([t.i,'@charset "UTF-8";\n/**\n * 这里是uni-app内置的常用样式变量\n *\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\n *\n */\n/**\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\n *\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\n */\n/* 颜色变量 */\n/* 行为相关颜色 */.goods-search .header-wrap .search[data-v-1e9ec600]{box-shadow:0 3px 6px rgba(0,0,0,.03);position:relative;z-index:1}.goods-search .header-wrap .header[data-v-1e9ec600]{height:%?80?%}.goods-search .header-wrap .header .tag[data-v-1e9ec600]{height:100%;-webkit-box-flex:1;-webkit-flex:1;flex:1}.goods-search .content .search-words[data-v-1e9ec600]{padding-left:%?24?%;padding-bottom:%?20?%}.goods-search .content .search-words .title[data-v-1e9ec600]{padding:%?26?% 0}.goods-search .content .search-words .words .item[data-v-1e9ec600]{line-height:%?52?%;height:%?52?%;padding:0 %?24?%}.goods-search .content .goods-list[data-v-1e9ec600]{overflow:hidden}',""]),t.exports=e},a7e3:function(t,e,i){var o=i("24fb");e=o(!1),e.push([t.i,".price-format[data-v-a4a53404]{font-family:Avenir}",""]),t.exports=e},b678:function(t,e,i){var o=i("9171");"string"===typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);var n=i("4f06").default;n("0d0ecf2d",o,!0,{sourceMap:!1,shadowMode:!1})},c917:function(t,e,i){"use strict";var o=i("873e"),n=i.n(o);n.a},d1e2:function(t,e,i){"use strict";i.r(e);var o=i("d2a5"),n=i.n(o);for(var s in o)"default"!==s&&function(t){i.d(e,t,(function(){return o[t]}))}(s);e["default"]=n.a},d2a5:function(t,e,i){"use strict";i("a9e3"),i("acd8"),i("ac1f"),i("1276"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o={data:function(){return{priceSlice:{}}},components:{},props:{firstSize:{type:Number,default:28},secondSize:{type:Number,default:28},color:{type:String},weight:{type:[String,Number],default:400},price:{type:[String,Number],default:""},showSubscript:{type:Boolean,default:!0},subscriptSize:{type:Number,default:28},lineThrough:{type:Boolean,default:!1}},created:function(){this.priceFormat()},watch:{price:function(t){this.priceFormat()}},methods:{priceFormat:function(){var t=this.price,e={};null!==t&&(t=parseFloat(t),t=String(t).split("."),e.first=t[0],e.second=t[1],this.priceSlice=e)}}};e.default=o},f10f:function(t,e,i){"use strict";var o;i.d(e,"b",(function(){return n})),i.d(e,"c",(function(){return s})),i.d(e,"a",(function(){return o}));var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-text",{class:(t.lineThrough?"line-through":"")+" price-format",style:{color:t.color,"font-weight":t.weight}},[t.showSubscript?i("v-uni-text",{style:{"font-size":t.subscriptSize+"rpx","margin-right":"2rpx"}},[t._v("¥")]):t._e(),i("v-uni-text",{style:{"font-size":t.firstSize+"rpx","margin-right":"1rpx"}},[t._v(t._s(t.priceSlice.first))]),t.priceSlice.second?i("v-uni-text",{style:{"font-size":t.secondSize+"rpx"}},[t._v("."+t._s(t.priceSlice.second))]):t._e()],1)},s=[]},f13f:function(t,e,i){"use strict";i.r(e);var o=i("5169"),n=i.n(o);for(var s in o)"default"!==s&&function(t){i.d(e,t,(function(){return o[t]}))}(s);e["default"]=n.a},f195:function(t,e,i){"use strict";var o=i("2e19"),n=i.n(o);n.a}}]);